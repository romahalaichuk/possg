{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\possg4\\\\src\\\\components\\\\MenuManager.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./MenuManager.css\";\nimport { products } from \"./Produkt\";\nimport PaymentManager from \"./PaymentManager\";\nimport Dodatki from \"./Dodatki\";\nimport Procent from \"./Procent\";\nimport { getSelectedItems, addSelectedItem, removeSelectedItem, clearSelectedItems, updateSelectedItems } from \"./LocalStorageManager\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst categories = [\"Przystawki\", \"Pizza\", \"Makaron\", \"Menu sezonowe\", \"Desery\", \"Napój bezalkoholowy\", \"Wina\", \"Drinki\"];\nconst MenuManager = ({\n  tableName,\n  onClose,\n  onAddProduct,\n  resetTable\n}) => {\n  _s();\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [showMenuItemsModal, setShowMenuItemsModal] = useState(false);\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [showProcentModal, setShowProcentModal] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [menuItems, setMenuItems] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(categories[0]);\n  const [tableStatus, setTableStatus] = useState(\"free\");\n  const [currentTableName, setCurrentTableName] = useState(tableName);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [adjustments, setAdjustments] = useState({\n    service: 0,\n    discount: 0,\n    addToBill: 0,\n    subtractFromBill: 0\n  });\n  const modalRef = useRef(null);\n  const overlayRef = useRef(null);\n  const searchBarRef = useRef(null);\n  const calculateTotalItemsAndAmount = () => {\n    let totalItems = 0;\n    let totalAmount = 0;\n    selectedItems.forEach(item => {\n      totalItems += item.quantity;\n      let itemPrice = item.price;\n      if (item.extras && item.extras.length > 0) {\n        item.extras.forEach(extra => {\n          if (extra.category === \"Dod\") {\n            itemPrice += extra.price;\n          }\n        });\n      }\n      totalAmount += itemPrice * item.quantity;\n    });\n    const discountAmount = adjustments.discount / 100 * totalAmount;\n    return {\n      totalItems,\n      totalAmount,\n      discountAmount\n    };\n  };\n  useEffect(() => {\n    const storedSelectedItems = getSelectedItems(tableName);\n    setSelectedItems(storedSelectedItems);\n    setTableStatus(storedSelectedItems.length > 0 ? \"occupied\" : \"free\");\n  }, [tableName]);\n  useEffect(() => {\n    const handleClickOutside = e => {\n      if (modalRef.current && !modalRef.current.contains(e.target) && overlayRef.current && overlayRef.current.contains(e.target)) {\n        setShowMenuItemsModal(false);\n        setShowProcentModal(false);\n      }\n      if (searchBarRef.current && !searchBarRef.current.contains(e.target)) {\n        setSearchResults([]);\n        setSearchTerm(\"\");\n      }\n    };\n    if (showMenuItemsModal || showProcentModal) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    } else {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [showMenuItemsModal, showProcentModal]);\n  const handleCategoryClick = category => {\n    setSelectedCategory(category);\n    const filteredItems = products.filter(item => item.category === category && (item.category !== \"Pizza\" || !selectedItems.some(si => si.id === item.id)));\n    setMenuItems(filteredItems);\n    setShowMenuItemsModal(true);\n    setShowPaymentModal(false);\n    setSearchResults([]);\n    setSearchTerm(\"\");\n  };\n  const handleSearchChange = e => {\n    const term = e.target.value.trim().toLowerCase();\n    setSearchTerm(e.target.value);\n    if (term === \"\") {\n      setSearchResults([]);\n    } else {\n      const filteredItems = products.filter(item => item.name.toLowerCase().includes(term));\n      setSearchResults(filteredItems);\n    }\n  };\n  const handleItemSelect = item => {\n    const existingPizza = selectedItems.find(i => i.category === \"Pizza\" && i.id === item.id);\n    if (existingPizza) {\n      const updatedItems = selectedItems.map(i => i === existingPizza ? {\n        ...i,\n        quantity: i.quantity + 1\n      } : i);\n      setSelectedItems(updatedItems);\n      updateSelectedItems(tableName, updatedItems);\n      onAddProduct(existingPizza.id, existingPizza.name, existingPizza.price);\n      addSelectedItem(`${tableName}_${existingPizza.id}`, existingPizza.id, existingPizza.name, existingPizza.price, existingPizza.comment || \"\");\n    } else {\n      const updatedItems = [...selectedItems, {\n        ...item,\n        quantity: 1\n      }];\n      setSelectedItems(updatedItems);\n      updateSelectedItems(tableName, updatedItems);\n      onAddProduct(item.id, item.name, item.price);\n      addSelectedItem(`${tableName}_${item.id}`, item.id, item.name, item.price, item.comment || \"\");\n    }\n    calculateTotalPrice();\n    setSearchResults([]);\n    setSearchTerm(\"\");\n  };\n  const handleItemSelectWithComment = (item, comment) => {\n    const updatedItem = {\n      ...item,\n      comment\n    };\n    handleItemSelect(updatedItem);\n  };\n  const handleItemRemove = itemId => {\n    const updatedItems = selectedItems.map(item => item.id === itemId ? {\n      ...item,\n      quantity: item.quantity - 1\n    } : item);\n    const filteredItems = updatedItems.filter(item => item.quantity > 0);\n    setSelectedItems(filteredItems);\n    updateSelectedItems(tableName, filteredItems);\n    removeSelectedItem(`${tableName}_${itemId}`);\n  };\n  const handleCommentChange = (comment, itemId) => {\n    const updatedItems = selectedItems.map(item => item.id === itemId ? {\n      ...item,\n      comment: comment\n    } : item);\n    setSelectedItems(updatedItems);\n    updateSelectedItems(tableName, updatedItems);\n  };\n  const handleCommentAdd = comment => {\n    const commentId = `comment_${new Date().getTime()}`;\n    const commentItem = {\n      id: commentId,\n      name: `Komentarz: ${comment}`,\n      price: 0,\n      quantity: 1,\n      comment: comment\n    };\n    const updatedItems = [...selectedItems, commentItem];\n    setSelectedItems(updatedItems);\n    updateSelectedItems(tableName, updatedItems);\n  };\n  const handleAddExtra = (itemId, extra) => {\n    const updatedItems = selectedItems.map(item => item.id === itemId ? {\n      ...item,\n      extras: [...(item.extras || []), extra],\n      price: item.price < extra.price ? extra.price : item.price\n    } : item);\n    setSelectedItems(updatedItems);\n    updateSelectedItems(tableName, updatedItems);\n    calculateTotalPrice();\n  };\n  const handleRemoveExtra = (itemId, extraId) => {\n    const updatedItems = selectedItems.map(item => item.id === itemId ? {\n      ...item,\n      extras: item.extras.filter(extra => extra.id !== extraId),\n      price: item.extras && item.extras.length > 0 ? Math.max(item.price, item.extras.reduce((max, extra) => Math.max(max, extra.price))) : item.price\n    } : item);\n    setSelectedItems(updatedItems);\n    updateSelectedItems(tableName, updatedItems);\n  };\n  const calculateTotalPrice = () => {\n    let totalPrice = 0;\n    selectedItems.forEach(item => {\n      totalPrice += (item.price + (item.extras ? item.extras.reduce((sum, extra) => extra.category === \"Dod\" ? sum + extra.price : sum, 0) : 0)) * item.quantity;\n    });\n    setTotalPrice(totalPrice);\n  };\n  const handleRozliczClick = () => {\n    setShowPaymentModal(true);\n  };\n  const handlePaymentComplete = () => {\n    // Update local storage to include the table name in the served wynos tables list\n    let servedWynosTables = JSON.parse(localStorage.getItem(\"servedWynosTables\")) || [];\n    if (!servedWynosTables.includes(tableName)) {\n      servedWynosTables.push(tableName);\n      localStorage.setItem(\"servedWynosTables\", JSON.stringify(servedWynosTables));\n    }\n    clearSelectedItems(tableName);\n    setSelectedItems([]);\n    setShowPaymentModal(false);\n    setTableStatus(\"free\");\n    setCurrentTableName(tableName);\n    resetTable();\n    onClose(totalPrice, adjustments);\n  };\n  const handleAdjustmentsSubmit = adjustments => {\n    setAdjustments(adjustments);\n    setShowProcentModal(false);\n  };\n  const handleOpenProcentModal = () => {\n    setShowProcentModal(true);\n  };\n  const handleOverlayClick = e => {\n    if (e.target.classList.contains(\"extras-modal-overlay\")) {\n      setShowMenuItemsModal(false);\n    }\n  };\n  const handleOverlayClickk = e => {\n    if (e.target.classList.contains(\"procent-modal-overlay\")) {\n      setShowProcentModal(false);\n    }\n  };\n  const {\n    totalItems,\n    totalAmount,\n    discountAmount\n  } = calculateTotalItemsAndAmount();\n  const serviceCharge = adjustments.service / 100 * totalAmount;\n  const calculateAdjustedTotal = () => {\n    let adjustedTotal = totalAmount;\n\n    // Apply service charge if applicable\n    if (adjustments.service > 0) {\n      adjustedTotal += adjustments.service / 100 * totalAmount;\n    }\n\n    // Apply discount if applicable\n    if (adjustments.discount > 0) {\n      const discountAmount = adjustments.discount / 100 * totalAmount;\n      adjustedTotal -= discountAmount;\n    }\n\n    // Apply add to bill adjustment if applicable\n    if (adjustments.addToBill > 0) {\n      adjustedTotal += adjustments.addToBill;\n    }\n\n    // Apply subtract from bill adjustment if applicable\n    if (adjustments.subtractFromBill > 0) {\n      adjustedTotal -= adjustments.subtractFromBill;\n    }\n    return adjustedTotal;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `menu-manager-overlay ${tableStatus}`,\n    ref: overlayRef,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-manager\",\n      ref: modalRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: currentTableName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-buttons\",\n        children: [categories.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleCategoryClick(category),\n          className: category === selectedCategory ? \"active\" : \"\",\n          children: category\n        }, category, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 7\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleOpenProcentModal,\n          children: \"%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 6\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-bar\",\n        ref: searchBarRef,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Szukaj produktu...\",\n          value: searchTerm,\n          onChange: handleSearchChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Zam\\xF3wienie stolika\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 6\n        }, this), searchTerm.trim() !== \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-suggestions\",\n          children: [searchResults.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-suggestion\",\n            onClick: () => handleItemSelectWithComment(item, searchTerm),\n            children: [item.name, \" - \", item.price, \" z\\u0142\"]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 9\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-suggestion\",\n            onClick: () => {\n              handleCommentAdd(searchTerm);\n              setSearchResults([]);\n              setSearchTerm(\"\");\n            },\n            children: [\"Dodaj jako komentarz: \\\"\", searchTerm, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 5\n      }, this), showMenuItemsModal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"extras-modal-overlay\",\n        onClick: handleOverlayClick,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"menu-items-modal\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-items\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Menu - \", selectedCategory]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: menuItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [item.name, \" - \", item.price, \" z\\u0142\", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleItemSelect(item),\n                  children: \"Dodaj\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 12\n                }, this)]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 11\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-buttons\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowMenuItemsModal(false),\n                children: \"Zamknij\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-items\",\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          children: selectedItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [item.name, \" - \", item.price ? item.price : 0, \" z\\u0142 x \", item.quantity, \" \", \"=\", \" \", ((item.price + (item.extras ? item.extras.reduce((sum, extra) => extra.category === \"Dod\" ? sum + extra.price : sum, 0) : 0)) * item.quantity).toFixed(2), \" \", \"z\\u0142\", /*#__PURE__*/_jsxDEV(Dodatki, {\n              selectedItemId: item.id,\n              selectedItems: selectedItems,\n              handleAddExtra: handleAddExtra,\n              handleRemoveExtra: handleRemoveExtra\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: item.comment || \"\",\n              placeholder: \"Komentarz\",\n              onChange: e => handleCommentChange(e.target.value, item.id),\n              className: \"comment-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleItemRemove(item.id),\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleItemSelect(item),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 9\n            }, this)]\n          }, `${item.id}-${index}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 8\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Liczba pozycji: \", totalItems]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Suma: \", calculateAdjustedTotal().toFixed(2), \" z\\u0142\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 6\n        }, this), adjustments.service > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: [\"Zastosowano \", adjustments.service, \"% serwisu (+\", \" \", serviceCharge.toFixed(2), \" z\\u0142)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 7\n        }, this), adjustments.discount > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"blue\"\n          },\n          children: [\"Zastosowano \", adjustments.discount.toFixed(2), \" % zni\\u017Cki (-\", \" \", discountAmount.toFixed(2), \" z\\u0142), do zap\\u0142aty:\", \" \", (totalAmount - discountAmount).toFixed(2), \" z\\u0142\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 7\n        }, this), adjustments.addToBill > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"green\"\n          },\n          children: [\"Dodano \", adjustments.addToBill.toFixed(2), \" z\\u0142 do rachunku (+\", \" \", adjustments.addToBill.toFixed(2), \" z\\u0142)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 7\n        }, this), adjustments.subtractFromBill > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"blue\"\n          },\n          children: [\"Odejmowano \", adjustments.subtractFromBill.toFixed(2), \" z\\u0142 od rachunku (- \", adjustments.subtractFromBill.toFixed(2), \" z\\u0142)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          children: \"Zamknij\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 6\n        }, this), selectedItems.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRozliczClick,\n          children: \"Rozlicz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 5\n      }, this), showPaymentModal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-modal\",\n        children: /*#__PURE__*/_jsxDEV(PaymentManager, {\n          selectedItems: selectedItems,\n          adjustedTotalAmount: calculateAdjustedTotal(),\n          onClose: handlePaymentComplete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 6\n      }, this), showProcentModal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"procent-modal-overlay\",\n        onClick: handleOverlayClickk,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"procent-modal\",\n          children: /*#__PURE__*/_jsxDEV(Procent, {\n            onClose: () => setShowProcentModal(false),\n            onSubmit: handleAdjustmentsSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 342,\n    columnNumber: 3\n  }, this);\n};\n_s(MenuManager, \"1XA6JmJenLmfB9/tcob1dqWmNWM=\");\n_c = MenuManager;\nexport default MenuManager;\nvar _c;\n$RefreshReg$(_c, \"MenuManager\");","map":{"version":3,"names":["React","useState","useEffect","useRef","products","PaymentManager","Dodatki","Procent","getSelectedItems","addSelectedItem","removeSelectedItem","clearSelectedItems","updateSelectedItems","jsxDEV","_jsxDEV","categories","MenuManager","tableName","onClose","onAddProduct","resetTable","_s","selectedItems","setSelectedItems","showMenuItemsModal","setShowMenuItemsModal","showPaymentModal","setShowPaymentModal","showProcentModal","setShowProcentModal","searchTerm","setSearchTerm","searchResults","setSearchResults","menuItems","setMenuItems","selectedCategory","setSelectedCategory","tableStatus","setTableStatus","currentTableName","setCurrentTableName","totalPrice","setTotalPrice","adjustments","setAdjustments","service","discount","addToBill","subtractFromBill","modalRef","overlayRef","searchBarRef","calculateTotalItemsAndAmount","totalItems","totalAmount","forEach","item","quantity","itemPrice","price","extras","length","extra","category","discountAmount","storedSelectedItems","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","handleCategoryClick","filteredItems","filter","some","si","id","handleSearchChange","term","value","trim","toLowerCase","name","includes","handleItemSelect","existingPizza","find","i","updatedItems","map","comment","calculateTotalPrice","handleItemSelectWithComment","updatedItem","handleItemRemove","itemId","handleCommentChange","handleCommentAdd","commentId","Date","getTime","commentItem","handleAddExtra","handleRemoveExtra","extraId","Math","max","reduce","sum","handleRozliczClick","handlePaymentComplete","servedWynosTables","JSON","parse","localStorage","getItem","push","setItem","stringify","handleAdjustmentsSubmit","handleOpenProcentModal","handleOverlayClick","classList","handleOverlayClickk","serviceCharge","calculateAdjustedTotal","adjustedTotal","className","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","placeholder","onChange","index","toFixed","selectedItemId","style","color","adjustedTotalAmount","onSubmit","_c","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/Desktop/possg4/src/components/MenuManager.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport \"./MenuManager.css\";\r\nimport { products } from \"./Produkt\";\r\nimport PaymentManager from \"./PaymentManager\";\r\nimport Dodatki from \"./Dodatki\";\r\nimport Procent from \"./Procent\";\r\nimport {\r\n\tgetSelectedItems,\r\n\taddSelectedItem,\r\n\tremoveSelectedItem,\r\n\tclearSelectedItems,\r\n\tupdateSelectedItems,\r\n} from \"./LocalStorageManager\";\r\n\r\nconst categories = [\r\n\t\"Przystawki\",\r\n\t\"Pizza\",\r\n\t\"Makaron\",\r\n\t\"Menu sezonowe\",\r\n\t\"Desery\",\r\n\t\"Napój bezalkoholowy\",\r\n\t\"Wina\",\r\n\t\"Drinki\",\r\n];\r\n\r\nconst MenuManager = ({ tableName, onClose, onAddProduct, resetTable }) => {\r\n\tconst [selectedItems, setSelectedItems] = useState([]);\r\n\tconst [showMenuItemsModal, setShowMenuItemsModal] = useState(false);\r\n\tconst [showPaymentModal, setShowPaymentModal] = useState(false);\r\n\tconst [showProcentModal, setShowProcentModal] = useState(false);\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\tconst [searchResults, setSearchResults] = useState([]);\r\n\tconst [menuItems, setMenuItems] = useState([]);\r\n\tconst [selectedCategory, setSelectedCategory] = useState(categories[0]);\r\n\tconst [tableStatus, setTableStatus] = useState(\"free\");\r\n\tconst [currentTableName, setCurrentTableName] = useState(tableName);\r\n\tconst [totalPrice, setTotalPrice] = useState(0);\r\n\tconst [adjustments, setAdjustments] = useState({\r\n\t\tservice: 0,\r\n\t\tdiscount: 0,\r\n\t\taddToBill: 0,\r\n\t\tsubtractFromBill: 0,\r\n\t});\r\n\r\n\tconst modalRef = useRef(null);\r\n\tconst overlayRef = useRef(null);\r\n\tconst searchBarRef = useRef(null);\r\n\r\n\tconst calculateTotalItemsAndAmount = () => {\r\n\t\tlet totalItems = 0;\r\n\t\tlet totalAmount = 0;\r\n\r\n\t\tselectedItems.forEach((item) => {\r\n\t\t\ttotalItems += item.quantity;\r\n\t\t\tlet itemPrice = item.price;\r\n\r\n\t\t\tif (item.extras && item.extras.length > 0) {\r\n\t\t\t\titem.extras.forEach((extra) => {\r\n\t\t\t\t\tif (extra.category === \"Dod\") {\r\n\t\t\t\t\t\titemPrice += extra.price;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttotalAmount += itemPrice * item.quantity;\r\n\t\t});\r\n\r\n\t\tconst discountAmount = (adjustments.discount / 100) * totalAmount;\r\n\r\n\t\treturn { totalItems, totalAmount, discountAmount };\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst storedSelectedItems = getSelectedItems(tableName);\r\n\t\tsetSelectedItems(storedSelectedItems);\r\n\t\tsetTableStatus(storedSelectedItems.length > 0 ? \"occupied\" : \"free\");\r\n\t}, [tableName]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handleClickOutside = (e) => {\r\n\t\t\tif (\r\n\t\t\t\tmodalRef.current &&\r\n\t\t\t\t!modalRef.current.contains(e.target) &&\r\n\t\t\t\toverlayRef.current &&\r\n\t\t\t\toverlayRef.current.contains(e.target)\r\n\t\t\t) {\r\n\t\t\t\tsetShowMenuItemsModal(false);\r\n\t\t\t\tsetShowProcentModal(false);\r\n\t\t\t}\r\n\t\t\tif (searchBarRef.current && !searchBarRef.current.contains(e.target)) {\r\n\t\t\t\tsetSearchResults([]);\r\n\t\t\t\tsetSearchTerm(\"\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (showMenuItemsModal || showProcentModal) {\r\n\t\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\t} else {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, [showMenuItemsModal, showProcentModal]);\r\n\r\n\tconst handleCategoryClick = (category) => {\r\n\t\tsetSelectedCategory(category);\r\n\t\tconst filteredItems = products.filter(\r\n\t\t\t(item) =>\r\n\t\t\t\titem.category === category &&\r\n\t\t\t\t(item.category !== \"Pizza\" ||\r\n\t\t\t\t\t!selectedItems.some((si) => si.id === item.id))\r\n\t\t);\r\n\t\tsetMenuItems(filteredItems);\r\n\t\tsetShowMenuItemsModal(true);\r\n\t\tsetShowPaymentModal(false);\r\n\t\tsetSearchResults([]);\r\n\t\tsetSearchTerm(\"\");\r\n\t};\r\n\r\n\tconst handleSearchChange = (e) => {\r\n\t\tconst term = e.target.value.trim().toLowerCase();\r\n\t\tsetSearchTerm(e.target.value);\r\n\t\tif (term === \"\") {\r\n\t\t\tsetSearchResults([]);\r\n\t\t} else {\r\n\t\t\tconst filteredItems = products.filter((item) =>\r\n\t\t\t\titem.name.toLowerCase().includes(term)\r\n\t\t\t);\r\n\t\t\tsetSearchResults(filteredItems);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleItemSelect = (item) => {\r\n\t\tconst existingPizza = selectedItems.find(\r\n\t\t\t(i) => i.category === \"Pizza\" && i.id === item.id\r\n\t\t);\r\n\r\n\t\tif (existingPizza) {\r\n\t\t\tconst updatedItems = selectedItems.map((i) =>\r\n\t\t\t\ti === existingPizza ? { ...i, quantity: i.quantity + 1 } : i\r\n\t\t\t);\r\n\t\t\tsetSelectedItems(updatedItems);\r\n\t\t\tupdateSelectedItems(tableName, updatedItems);\r\n\t\t\tonAddProduct(existingPizza.id, existingPizza.name, existingPizza.price);\r\n\t\t\taddSelectedItem(\r\n\t\t\t\t`${tableName}_${existingPizza.id}`,\r\n\t\t\t\texistingPizza.id,\r\n\t\t\t\texistingPizza.name,\r\n\t\t\t\texistingPizza.price,\r\n\t\t\t\texistingPizza.comment || \"\"\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tconst updatedItems = [...selectedItems, { ...item, quantity: 1 }];\r\n\t\t\tsetSelectedItems(updatedItems);\r\n\t\t\tupdateSelectedItems(tableName, updatedItems);\r\n\t\t\tonAddProduct(item.id, item.name, item.price);\r\n\t\t\taddSelectedItem(\r\n\t\t\t\t`${tableName}_${item.id}`,\r\n\t\t\t\titem.id,\r\n\t\t\t\titem.name,\r\n\t\t\t\titem.price,\r\n\t\t\t\titem.comment || \"\"\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tcalculateTotalPrice();\r\n\t\tsetSearchResults([]);\r\n\t\tsetSearchTerm(\"\");\r\n\t};\r\n\r\n\tconst handleItemSelectWithComment = (item, comment) => {\r\n\t\tconst updatedItem = { ...item, comment };\r\n\t\thandleItemSelect(updatedItem);\r\n\t};\r\n\r\n\tconst handleItemRemove = (itemId) => {\r\n\t\tconst updatedItems = selectedItems.map((item) =>\r\n\t\t\titem.id === itemId ? { ...item, quantity: item.quantity - 1 } : item\r\n\t\t);\r\n\t\tconst filteredItems = updatedItems.filter((item) => item.quantity > 0);\r\n\t\tsetSelectedItems(filteredItems);\r\n\t\tupdateSelectedItems(tableName, filteredItems);\r\n\t\tremoveSelectedItem(`${tableName}_${itemId}`);\r\n\t};\r\n\r\n\tconst handleCommentChange = (comment, itemId) => {\r\n\t\tconst updatedItems = selectedItems.map((item) =>\r\n\t\t\titem.id === itemId ? { ...item, comment: comment } : item\r\n\t\t);\r\n\t\tsetSelectedItems(updatedItems);\r\n\t\tupdateSelectedItems(tableName, updatedItems);\r\n\t};\r\n\r\n\tconst handleCommentAdd = (comment) => {\r\n\t\tconst commentId = `comment_${new Date().getTime()}`;\r\n\t\tconst commentItem = {\r\n\t\t\tid: commentId,\r\n\t\t\tname: `Komentarz: ${comment}`,\r\n\t\t\tprice: 0,\r\n\t\t\tquantity: 1,\r\n\t\t\tcomment: comment,\r\n\t\t};\r\n\r\n\t\tconst updatedItems = [...selectedItems, commentItem];\r\n\t\tsetSelectedItems(updatedItems);\r\n\t\tupdateSelectedItems(tableName, updatedItems);\r\n\t};\r\n\r\n\tconst handleAddExtra = (itemId, extra) => {\r\n\t\tconst updatedItems = selectedItems.map((item) =>\r\n\t\t\titem.id === itemId\r\n\t\t\t\t? {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\textras: [...(item.extras || []), extra],\r\n\t\t\t\t\t\tprice: item.price < extra.price ? extra.price : item.price,\r\n\t\t\t\t  }\r\n\t\t\t\t: item\r\n\t\t);\r\n\t\tsetSelectedItems(updatedItems);\r\n\t\tupdateSelectedItems(tableName, updatedItems);\r\n\t\tcalculateTotalPrice();\r\n\t};\r\n\r\n\tconst handleRemoveExtra = (itemId, extraId) => {\r\n\t\tconst updatedItems = selectedItems.map((item) =>\r\n\t\t\titem.id === itemId\r\n\t\t\t\t? {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\textras: item.extras.filter((extra) => extra.id !== extraId),\r\n\t\t\t\t\t\tprice:\r\n\t\t\t\t\t\t\titem.extras && item.extras.length > 0\r\n\t\t\t\t\t\t\t\t? Math.max(\r\n\t\t\t\t\t\t\t\t\t\titem.price,\r\n\t\t\t\t\t\t\t\t\t\titem.extras.reduce((max, extra) =>\r\n\t\t\t\t\t\t\t\t\t\t\tMath.max(max, extra.price)\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t: item.price,\r\n\t\t\t\t  }\r\n\t\t\t\t: item\r\n\t\t);\r\n\t\tsetSelectedItems(updatedItems);\r\n\t\tupdateSelectedItems(tableName, updatedItems);\r\n\t};\r\n\r\n\tconst calculateTotalPrice = () => {\r\n\t\tlet totalPrice = 0;\r\n\t\tselectedItems.forEach((item) => {\r\n\t\t\ttotalPrice +=\r\n\t\t\t\t(item.price +\r\n\t\t\t\t\t(item.extras\r\n\t\t\t\t\t\t? item.extras.reduce(\r\n\t\t\t\t\t\t\t\t(sum, extra) =>\r\n\t\t\t\t\t\t\t\t\textra.category === \"Dod\" ? sum + extra.price : sum,\r\n\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t: 0)) *\r\n\t\t\t\titem.quantity;\r\n\t\t});\r\n\t\tsetTotalPrice(totalPrice);\r\n\t};\r\n\r\n\tconst handleRozliczClick = () => {\r\n\t\tsetShowPaymentModal(true);\r\n\t};\r\n\r\n\tconst handlePaymentComplete = () => {\r\n\t\t// Update local storage to include the table name in the served wynos tables list\r\n\t\tlet servedWynosTables =\r\n\t\t\tJSON.parse(localStorage.getItem(\"servedWynosTables\")) || [];\r\n\t\tif (!servedWynosTables.includes(tableName)) {\r\n\t\t\tservedWynosTables.push(tableName);\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t\"servedWynosTables\",\r\n\t\t\t\tJSON.stringify(servedWynosTables)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tclearSelectedItems(tableName);\r\n\t\tsetSelectedItems([]);\r\n\t\tsetShowPaymentModal(false);\r\n\t\tsetTableStatus(\"free\");\r\n\t\tsetCurrentTableName(tableName);\r\n\t\tresetTable();\r\n\t\tonClose(totalPrice, adjustments);\r\n\t};\r\n\r\n\tconst handleAdjustmentsSubmit = (adjustments) => {\r\n\t\tsetAdjustments(adjustments);\r\n\t\tsetShowProcentModal(false);\r\n\t};\r\n\r\n\tconst handleOpenProcentModal = () => {\r\n\t\tsetShowProcentModal(true);\r\n\t};\r\n\r\n\tconst handleOverlayClick = (e) => {\r\n\t\tif (e.target.classList.contains(\"extras-modal-overlay\")) {\r\n\t\t\tsetShowMenuItemsModal(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOverlayClickk = (e) => {\r\n\t\tif (e.target.classList.contains(\"procent-modal-overlay\")) {\r\n\t\t\tsetShowProcentModal(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst { totalItems, totalAmount, discountAmount } =\r\n\t\tcalculateTotalItemsAndAmount();\r\n\tconst serviceCharge = (adjustments.service / 100) * totalAmount;\r\n\tconst calculateAdjustedTotal = () => {\r\n\t\tlet adjustedTotal = totalAmount;\r\n\r\n\t\t// Apply service charge if applicable\r\n\t\tif (adjustments.service > 0) {\r\n\t\t\tadjustedTotal += (adjustments.service / 100) * totalAmount;\r\n\t\t}\r\n\r\n\t\t// Apply discount if applicable\r\n\t\tif (adjustments.discount > 0) {\r\n\t\t\tconst discountAmount = (adjustments.discount / 100) * totalAmount;\r\n\t\t\tadjustedTotal -= discountAmount;\r\n\t\t}\r\n\r\n\t\t// Apply add to bill adjustment if applicable\r\n\t\tif (adjustments.addToBill > 0) {\r\n\t\t\tadjustedTotal += adjustments.addToBill;\r\n\t\t}\r\n\r\n\t\t// Apply subtract from bill adjustment if applicable\r\n\t\tif (adjustments.subtractFromBill > 0) {\r\n\t\t\tadjustedTotal -= adjustments.subtractFromBill;\r\n\t\t}\r\n\r\n\t\treturn adjustedTotal;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={`menu-manager-overlay ${tableStatus}`} ref={overlayRef}>\r\n\t\t\t<div className=\"menu-manager\" ref={modalRef}>\r\n\t\t\t\t<div className=\"menu-header\">\r\n\t\t\t\t\t<h2>{currentTableName}</h2>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"category-buttons\">\r\n\t\t\t\t\t{categories.map((category) => (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tkey={category}\r\n\t\t\t\t\t\t\tonClick={() => handleCategoryClick(category)}\r\n\t\t\t\t\t\t\tclassName={category === selectedCategory ? \"active\" : \"\"}>\r\n\t\t\t\t\t\t\t{category}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t<button onClick={handleOpenProcentModal}>%</button> {}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"search-bar\" ref={searchBarRef}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Szukaj produktu...\"\r\n\t\t\t\t\t\tvalue={searchTerm}\r\n\t\t\t\t\t\tonChange={handleSearchChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<h3>Zamówienie stolika</h3>\r\n\t\t\t\t\t{searchTerm.trim() !== \"\" && (\r\n\t\t\t\t\t\t<div className=\"search-suggestions\">\r\n\t\t\t\t\t\t\t{searchResults.map((item) => (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tkey={item.id}\r\n\t\t\t\t\t\t\t\t\tclassName=\"search-suggestion\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => handleItemSelectWithComment(item, searchTerm)}>\r\n\t\t\t\t\t\t\t\t\t{item.name} - {item.price} zł\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"search-suggestion\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\thandleCommentAdd(searchTerm);\r\n\t\t\t\t\t\t\t\t\tsetSearchResults([]);\r\n\t\t\t\t\t\t\t\t\tsetSearchTerm(\"\");\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tDodaj jako komentarz: \"{searchTerm}\"\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{showMenuItemsModal && (\r\n\t\t\t\t\t<div className=\"extras-modal-overlay\" onClick={handleOverlayClick}>\r\n\t\t\t\t\t\t<div className=\"menu-items-modal\">\r\n\t\t\t\t\t\t\t<div className=\"menu-items\">\r\n\t\t\t\t\t\t\t\t<h3>Menu - {selectedCategory}</h3>\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t{menuItems.map((item) => (\r\n\t\t\t\t\t\t\t\t\t\t<li key={item.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t{item.name} - {item.price} zł\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick={() => handleItemSelect(item)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tDodaj\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<div className=\"modal-buttons\">\r\n\t\t\t\t\t\t\t\t\t<button onClick={() => setShowMenuItemsModal(false)}>\r\n\t\t\t\t\t\t\t\t\t\tZamknij\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className=\"selected-items\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{selectedItems.map((item, index) => (\r\n\t\t\t\t\t\t\t<li key={`${item.id}-${index}`}>\r\n\t\t\t\t\t\t\t\t{item.name} - {item.price ? item.price : 0} zł x {item.quantity}{\" \"}\r\n\t\t\t\t\t\t\t\t={\" \"}\r\n\t\t\t\t\t\t\t\t{(\r\n\t\t\t\t\t\t\t\t\t(item.price +\r\n\t\t\t\t\t\t\t\t\t\t(item.extras\r\n\t\t\t\t\t\t\t\t\t\t\t? item.extras.reduce(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(sum, extra) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\textra.category === \"Dod\" ? sum + extra.price : sum,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t\t\t\t: 0)) *\r\n\t\t\t\t\t\t\t\t\titem.quantity\r\n\t\t\t\t\t\t\t\t).toFixed(2)}{\" \"}\r\n\t\t\t\t\t\t\t\tzł\r\n\t\t\t\t\t\t\t\t<Dodatki\r\n\t\t\t\t\t\t\t\t\tselectedItemId={item.id}\r\n\t\t\t\t\t\t\t\t\tselectedItems={selectedItems}\r\n\t\t\t\t\t\t\t\t\thandleAddExtra={handleAddExtra}\r\n\t\t\t\t\t\t\t\t\thandleRemoveExtra={handleRemoveExtra}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tvalue={item.comment || \"\"}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Komentarz\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => handleCommentChange(e.target.value, item.id)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"comment-input\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button onClick={() => handleItemRemove(item.id)}>-</button>\r\n\t\t\t\t\t\t\t\t<button onClick={() => handleItemSelect(item)}>+</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t<p>Liczba pozycji: {totalItems}</p>\r\n\t\t\t\t\t<p>Suma: {calculateAdjustedTotal().toFixed(2)} zł</p>\r\n\r\n\t\t\t\t\t{}\r\n\t\t\t\t\t{adjustments.service > 0 && (\r\n\t\t\t\t\t\t<p style={{ color: \"red\" }}>\r\n\t\t\t\t\t\t\tZastosowano {adjustments.service}% serwisu (+{\" \"}\r\n\t\t\t\t\t\t\t{serviceCharge.toFixed(2)} zł)\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{adjustments.discount > 0 && (\r\n\t\t\t\t\t\t<p style={{ color: \"blue\" }}>\r\n\t\t\t\t\t\t\tZastosowano {adjustments.discount.toFixed(2)} % zniżki (-{\" \"}\r\n\t\t\t\t\t\t\t{discountAmount.toFixed(2)} zł), do zapłaty:{\" \"}\r\n\t\t\t\t\t\t\t{(totalAmount - discountAmount).toFixed(2)} zł\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{adjustments.addToBill > 0 && (\r\n\t\t\t\t\t\t<p style={{ color: \"green\" }}>\r\n\t\t\t\t\t\t\tDodano {adjustments.addToBill.toFixed(2)} zł do rachunku (+{\" \"}\r\n\t\t\t\t\t\t\t{adjustments.addToBill.toFixed(2)} zł)\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{adjustments.subtractFromBill > 0 && (\r\n\t\t\t\t\t\t<p style={{ color: \"blue\" }}>\r\n\t\t\t\t\t\t\tOdejmowano {adjustments.subtractFromBill.toFixed(2)} zł od\r\n\t\t\t\t\t\t\trachunku (- {adjustments.subtractFromBill.toFixed(2)} zł)\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"modal-buttons\">\r\n\t\t\t\t\t<button onClick={onClose}>Zamknij</button>\r\n\t\t\t\t\t{selectedItems.length > 0 && (\r\n\t\t\t\t\t\t<button onClick={handleRozliczClick}>Rozlicz</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{showPaymentModal && (\r\n\t\t\t\t\t<div className=\"payment-modal\">\r\n\t\t\t\t\t\t<PaymentManager\r\n\t\t\t\t\t\t\tselectedItems={selectedItems}\r\n\t\t\t\t\t\t\tadjustedTotalAmount={calculateAdjustedTotal()}\r\n\t\t\t\t\t\t\tonClose={handlePaymentComplete}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{showProcentModal && (\r\n\t\t\t\t\t<div className=\"procent-modal-overlay\" onClick={handleOverlayClickk}>\r\n\t\t\t\t\t\t<div className=\"procent-modal\">\r\n\t\t\t\t\t\t\t<Procent\r\n\t\t\t\t\t\t\t\tonClose={() => setShowProcentModal(false)}\r\n\t\t\t\t\t\t\t\tonSubmit={handleAdjustmentsSubmit}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MenuManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}